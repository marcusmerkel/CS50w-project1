# Project 1 - Books

Web Programming with Python and JavaScript

## A book review website

This website is based on a given list of 5000 books which I imported into a PostgreSQL database with the import.py script. Users are now able to register, log in, search for books, leave reviews, read reviews by other people and see the average rating of the individual book on goodreads.com.

------------

## Files overview

### **import.py**

The file that imports the books.csv into the Heroku PostgreSQL database

### /static

This is the static folder that contains style sheets and images:

#### /static/scss/main.scss

The scss file that compiles into /static/css/main.css.

#### /static/css/main.css

The result of compiling /static/scss/main.scss.

#### /static/images/portobello-books.jpg

A pile of books - this image originates from Unsplash.

### **application.py**

The main python application which handles registering/login, error handling, as well as all the different routes.

### /templates

This is the template folder that contains all the html templates:

#### /templates/layout.html

The layout file that contains the html head, the navigation bar (plus a little script that adds the "active" class to the "current" nav element), an alert in case there is a flashed message, and finally the block "body". All other templates extend this layout.html template.

#### /templates/error.html

Extends layout.html. Shows an image generated by memegen.link with the current error code and error message.

#### /templates/login.html

Extends layout.html. The user is redirected here when he is not logged in (e.g. when there is no user_id stored in the actual session). A simple login form which is validated via the /login route in application.py.

#### /templates/register.html

Extends layout.html. The user comes here when not yet registered. A simple register form which is validated via the /register route in application.py.

#### /templates/index.html

Extends layout.html. The user is redirected here after logging in successfully. There's a welcome message to the user and a search form to perform a full text search on the database.

#### /templates/search.html

Extends layout.html. This is the page with all the search results. Any book of which ISBN, title or author contains the search string is displayed. Each row in the search results shows the ISBN, title, author and year of the book and contains a link to a detail page.

#### /templates/book.html

Extends layout.html. The user can get here on two ways, either by performing a search or by directly entering a URL like /book/_isbn_ into the address bar. Shows a detail page with ISBN, title, author and year, but also all the reviews that users have written for this book, as well as the average rating and number of ratings on goodreads.com. In case the user has not yet left a rating, there's an area at the end encouraging the user to do so. If there has been a review by the user for this particular book already, there is a thank you message displayed.

### Additional routes not covered by the templates

#### /logout

Logs the user out - e.g., cleares the session.

#### /submitreview

Takes the details of a user's review and inserts them into the "reviews" table in the database. Afterwards redirects to the detail book page.

#### /api/book/_isbn_

This is the API endpoint. It returns a JSON structure of data about the book with the given ISBN, like
```
{
  "author": "Walter Isaacson", 
  "average_score": 5.0, 
  "isbn": "1451648537", 
  "review_count": 3, 
  "title": "Steve Jobs", 
  "year": 2011
}
```
It returns an error and code 404 if the given ISBN does not exist in the database.



